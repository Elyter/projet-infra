(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{247:function(e,t,n){"use strict";n.d(t,"a",(function(){return A}));var r=n(6),o=n.n(r),s=n(379),a=n(381),c=n(169),i=n(0),l=n(77),u=n(10),j=n(9),b=n(52),d=n(23),f=n(12);var h=u.a.create({loading_container:{position:"absolute",left:0,right:0,top:100,bottom:0,alignItems:"center",justifyContent:"center"}}),m=function(){var e=Object(i.useState)(null),t=o()(e,2),n=t[0],r=t[1],s=Object(i.useState)(!0),a=o()(s,2),c=a[0],u=a[1];return Object(i.useEffect)((function(){fetch("https://mdljm.fr:8443/data/getData").then((function(e){return e.json()})).catch((function(e){return console.error(e)})).then((function(e){r(e),u(!1)}))}),[]),c?Object(f.jsx)(j.a,{style:h.loading_container,children:Object(f.jsx)(l.a,{size:"large"})}):Object(f.jsxs)(b.a,{style:{flex:1,margin:20},children:[Object(f.jsx)(d.a,{style:{fontSize:25},children:"Comment jouer ?"}),Object(f.jsx)(d.a,{style:{fontSize:17},children:n.howtoplay}),Object(f.jsx)(d.a,{style:{fontSize:25},children:"Tranche de gagnant :"}),Object(f.jsx)(d.a,{style:{fontSize:17,marginBottom:8},children:n.prize}),Object(f.jsx)(d.a,{style:{fontSize:25},children:"R\xe8glement :"}),Object(f.jsx)(d.a,{style:{fontSize:15},children:n.rules}),Object(f.jsx)(d.a,{style:{marginTop:40},children:"Site web d\xe9velopp\xe9 par Eliott Bregere"})]})},p=n(20),x=n.n(p),O=n(95),g=n(87),y=n(79),v=n.n(y);var S=function(e){return 1===e.position?Object(f.jsxs)(j.a,{style:{flexDirection:"row",margin:10,backgroundColor:"#d4ac0d"},children:[Object(f.jsxs)(d.a,{style:{fontSize:15},children:[e.position,".  "]}),Object(f.jsxs)(d.a,{style:{fontSize:15,marginRight:10},children:[e.prenom," ",e.nom," \ud83d\udc51"]}),Object(f.jsxs)(d.a,{style:{fontSize:15,marginLeft:"auto"},children:[e.points," Points"]})]}):2===e.position||3===e.position?Object(f.jsxs)(j.a,{style:{flexDirection:"row",margin:10,backgroundColor:"#aab7b8"},children:[Object(f.jsxs)(d.a,{style:{fontSize:15},children:[e.position,".  "]}),Object(f.jsxs)(d.a,{style:{fontSize:15,marginRight:10},children:[e.prenom," ",e.nom]}),Object(f.jsxs)(d.a,{style:{fontSize:15,marginLeft:"auto"},children:[e.points," Points"]})]}):e.position>3&&e.position<=15?Object(f.jsxs)(j.a,{style:{flexDirection:"row",margin:10,backgroundColor:"#e59866"},children:[Object(f.jsxs)(d.a,{style:{fontSize:15},children:[e.position,".  "]}),Object(f.jsxs)(d.a,{style:{fontSize:15,marginRight:10},children:[e.prenom," ",e.nom]}),Object(f.jsxs)(d.a,{style:{fontSize:15,marginLeft:"auto"},children:[e.points," Points"]})]}):Object(f.jsxs)(j.a,{style:{flexDirection:"row",margin:10},children:[Object(f.jsxs)(d.a,{style:{fontSize:15},children:[e.position,".  "]}),Object(f.jsxs)(d.a,{style:{fontSize:15,marginRight:10},children:[e.prenom," ",e.nom]}),Object(f.jsxs)(d.a,{style:{fontSize:15,marginLeft:"auto"},children:[e.points," Points"]})]})},C=u.a.create({loading_container:{position:"absolute",left:0,right:0,top:100,bottom:0,alignItems:"center",justifyContent:"center"},main_container:{flex:1,textAlign:"center",margin:10,alignItems:"center",justifyContent:"center"},buttons:{marginTop:30,flexDirection:"row",justifyContent:"space-evenly"}}),z=function(e){var t=e.navigation,n=(t.navigate,t.replace,Object(i.useState)(0)),r=o()(n,2),s=r[0],a=r[1],c=Object(i.useState)(0),u=o()(c,2),h=u[0],m=u[1],p=Object(i.useState)(0),y=o()(p,2),z=y[0],T=y[1],w=Object(i.useState)(0),I=o()(w,2),k=I[0],P=I[1],R=Object(i.useState)(!1),_=o()(R,2),E=_[0],D=_[1],L=Object(i.useState)({}),U=o()(L,2),B=U[0],W=U[1],A=Object(i.useState)(!0),M=o()(A,2),N=M[0],q=M[1],J=Object(i.useState)(0),V=o()(J,2),H=V[0],Z=V[1];return Object(i.useEffect)((function(){setInterval((function(){var e=new Date("2022-04-08T06:00:00.000Z")-new Date;if(e<1)D(!0);else{var t=Math.floor(e/864e5),n=Math.floor(e/36e5%24),r=Math.floor(e/1e3/60%60),o=Math.floor(e/1e3%60);a(t),m(n),T(r),P(o)}}),1e3)}),[]),E?N?(fetch("https://mdljm.fr:8443/qrcode/classement").then((function(e){return e.json()})).catch((function(e){return console.error(e)})).then((function(e){W(e.classement)})),function(){var e,t;return x.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,x.a.awrap(v.a.getItem("token"));case 2:return e=n.sent,t="https://mdljm.fr:8443/account/getClassement?token="+encodeURI(e),n.abrupt("return",fetch(t).then((function(e){return e.json()})).catch((function(e){return console.error(e)})));case 5:case"end":return n.stop()}}),null,null,null,Promise)}().then((function(e){Z(e.rank)})),q(!1),Object(f.jsx)(j.a,{style:C.loading_container,children:Object(f.jsx)(l.a,{size:"large"})})):Object(f.jsxs)(b.a,{style:C.classement,children:[Object(f.jsxs)(j.a,{style:C.buttons,children:[Object(f.jsxs)(d.a,{children:["Votre rang est: ",H]}),Object(f.jsx)(g.a,{onPress:function(){q(!0)},title:"\ud83d\udd01"})]}),Object(f.jsx)(O.a,{data:B,renderItem:function(e){var t=e.item;return Object(f.jsx)(S,{position:t.position,prenom:t.prenom,nom:t.nom,points:t.points})}})]}):Object(f.jsxs)(j.a,{style:C.main_container,children:[Object(f.jsx)(d.a,{style:{marginBottom:10},children:"Bient\xf4t ! \ud83d\ude09"}),Object(f.jsxs)(d.a,{children:[s," Jours ",h," Heures ",z," minutes ",k," secondes"]})]})},T=(n(369),n(380)),w=n(67);var I=u.a.create({loading_container:{position:"absolute",left:0,right:0,top:100,bottom:0,alignItems:"center",justifyContent:"center"},main_container:{flex:1,textAlign:"center",margin:10},buttons:{marginTop:30,flexDirection:"row",justifyContent:"space-evenly"}}),k=function(e){var t=e.navigation,n=t.navigate,r=t.replace,s=Object(i.useState)(""),a=o()(s,2),c=a[0],u=a[1],b=Object(i.useState)(""),h=o()(b,2),m=h[0],p=h[1],O=Object(i.useState)(!1),y=o()(O,2),S=y[0],C=y[1],z=Object(i.useState)(""),T=o()(z,2),k=T[0],P=T[1];if(S)return Object(f.jsx)(j.a,{style:I.loading_container,children:Object(f.jsx)(l.a,{size:"large"})});return x.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.awrap(v.a.getItem("token"));case 3:null!==e.sent&&r("Profil"),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),null,null,[[0,7]],Promise),Object(f.jsxs)(j.a,{style:I.main_container,children:[Object(f.jsx)(d.a,{style:{fontSize:17},children:"Email:"}),Object(f.jsx)(w.a,{textContentType:"emailAddress",autoCorrect:!1,autoCompleteType:"email",keyboardType:"email-address",style:{height:40,borderColor:"gray",borderWidth:1},onChangeText:function(e){return u(e)},value:c}),Object(f.jsx)(d.a,{style:{fontSize:17},children:"Mot de passe:"}),Object(f.jsx)(w.a,{textContentType:"password",secureTextEntry:!0,autoCorrect:!1,autoCompleteType:"password",style:{height:40,borderColor:"gray",borderWidth:1},onChangeText:function(e){return p(e)},value:m}),Object(f.jsxs)(j.a,{style:I.buttons,children:[Object(f.jsx)(g.a,{onPress:function(){C(!0),function(e,t){var n="https://mdljm.fr:8443/account/login?email="+encodeURI(e)+"&password="+encodeURI(t);return fetch(n).then((function(e){return e.json()})).catch((function(e){return console.error(e)}))}(c,m).then((function(e){if(console.log(e),e.token){x.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,x.a.awrap(v.a.setItem("token",""+e.token));case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),P(t.t0);case 8:case"end":return t.stop()}}),null,null,[[0,5]],Promise),C(!1),n("Porfil")}else P("Erreur: vos identifiants ne fonctionnent pas."),C(!1)}))},title:"Se connecter"}),Object(f.jsx)(g.a,{onPress:function(){n("Register")},title:"Cr\xe9er un compte ?"})]}),Object(f.jsx)(d.a,{children:k})]})},P=n(135);var R=u.a.create({main_container:{flex:1,textAlign:"center",marginRight:10,marginLeft:10},loading_container:{position:"absolute",left:0,right:0,top:100,bottom:0,alignItems:"center",justifyContent:"center"}}),_=function(e){var t=e.navigation,n=(t.navigate,t.replace),r=Object(i.useState)(""),s=o()(r,2),a=s[0],c=s[1],u=Object(i.useState)(""),h=o()(u,2),m=h[0],p=h[1],O=Object(i.useState)(""),y=o()(O,2),S=y[0],C=y[1],z=Object(i.useState)(""),T=o()(z,2),I=T[0],k=T[1],_=Object(i.useState)(""),E=o()(_,2),D=E[0],L=E[1],U=Object(i.useState)(""),B=o()(U,2),W=B[0],A=B[1],M=Object(i.useState)(""),N=o()(M,2),q=N[0],J=N[1],V=Object(i.useState)(""),H=o()(V,2),Z=H[0],F=H[1],G=Object(i.useState)(!1),K=o()(G,2),Q=K[0],X=K[1];return Q?Object(f.jsx)(j.a,{style:R.loading_container,children:Object(f.jsx)(l.a,{size:"large"})}):Object(f.jsxs)(b.a,{style:R.main_container,children:[Object(f.jsx)(d.a,{style:{fontSize:17},children:"Pr\xe9nom:"}),Object(f.jsx)(w.a,{textContentType:"username",autoCorrect:!1,autoCompleteType:"username",style:{height:40,borderColor:"gray",borderWidth:1},onChangeText:function(e){return c(e)},value:a}),Object(f.jsx)(d.a,{style:{fontSize:17,marginTop:25},children:"Nom:"}),Object(f.jsx)(w.a,{textContentType:"username",autoCorrect:!1,autoCompleteType:"username",style:{height:40,borderColor:"gray",borderWidth:1},onChangeText:function(e){return p(e)},value:m}),Object(f.jsx)(d.a,{style:{fontSize:17,marginTop:25},children:"Email:"}),Object(f.jsx)(w.a,{textContentType:"emailAddress",autoCorrect:!1,autoCompleteType:"email",keyboardType:"email-address",style:{height:40,borderColor:"gray",borderWidth:1},onChangeText:function(e){return C(e)},value:S}),Object(f.jsx)(d.a,{style:{fontSize:17,marginTop:25},children:"Mot de passe:"}),Object(f.jsx)(w.a,{textContentType:"password",secureTextEntry:!0,autoCorrect:!1,autoCompleteType:"password",style:{height:40,borderColor:"gray",borderWidth:1},onChangeText:function(e){k(e),A(D!=e?"Vos mots de passe sont diff\xe9rents":"")},value:I}),Object(f.jsx)(d.a,{style:{fontSize:17,marginTop:25},children:"R\xe9\xe9crivez le mot de passe:"}),Object(f.jsx)(w.a,{textContentType:"password",secureTextEntry:!0,autoCorrect:!1,autoCompleteType:"password",style:{height:40,borderColor:"gray",borderWidth:1},onChangeText:function(e){L(e),A(I!=e?"Vos mots de passe sont diff\xe9rents":"")},value:D}),Object(f.jsxs)(P.b,{onSelect:function(e,t){return F(t)},children:[Object(f.jsx)(P.a,{value:"eleve",children:Object(f.jsx)(d.a,{children:"El\xe8ve"})}),Object(f.jsx)(P.a,{value:"prof",children:Object(f.jsx)(d.a,{children:"Professeur"})}),Object(f.jsx)(P.a,{value:"personnel",children:Object(f.jsx)(d.a,{children:"Personnel"})})]}),Object(f.jsx)(j.a,{style:{marginTop:25,flexDirection:"row",justifyContent:"space-evenly"},children:Object(f.jsx)(g.a,{title:"Cr\xe9er le compte",onPress:function(){""===W&&""!=Z&&(X(!0),function(e,t,n,r,o){var s="https://mdljm.fr:8443/account/register?prenom="+encodeURI(e)+"&nom="+encodeURI(t)+"&email="+encodeURI(n)+"&type="+encodeURI(r)+"&password="+encodeURI(o);return fetch(s).then((function(e){return e.json()})).catch((function(e){return console.error(e)}))}(a,m,S,Z,I).then((function(e){if(e.token){x.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,x.a.awrap(v.a.setItem("token",""+e.token));case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),J(t.t0);case 8:case"end":return t.stop()}}),null,null,[[0,5]],Promise),n("Profil")}else J("Une erreur c'est produite. d\xe9tails: "+e.error),X(!1)})))}})}),Object(f.jsx)(d.a,{style:{color:"red"},children:W}),Object(f.jsx)(d.a,{style:{color:"red"},children:q}),Object(f.jsx)(d.a,{style:{fontSize:9},children:'Aucunes donn\xe9es personnelles ne sont collect\xe9es sauf celles rentr\xe9es pendant l\'inscription. En cliquant sur "cr\xe9er le compte" vous acceptez que vos donn\xe9es rentr\xe9es soit stock\xe9 et encrypt\xe9 dans notre base de donn\xe9es.'})]})};function E(e){var t="https://mdljm.fr:8443/account/info?token="+encodeURI(e);return fetch(t).then((function(e){return e.json()})).catch((function(e){return console.error(e)}))}var D=u.a.create({main_container:{flex:1},text:{margin:10},buttons:{marginTop:30,flexDirection:"row",justifyContent:"space-evenly"}}),L=function(e){var t=e.navigation,n=t.navigate,r=t.replace,s=Object(i.useState)("Chargement en cours..."),a=o()(s,2),c=a[0],l=a[1],u=Object(i.useState)("Chargement en cours..."),b=o()(u,2),h=b[0],m=b[1],p=Object(i.useState)("Chargement en cours..."),O=o()(p,2),y=O[0],S=O[1],C=Object(i.useState)("Chargement en cours..."),z=o()(C,2),T=z[0],w=z[1];return function(){var e;x.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,x.a.awrap(v.a.getItem("token"));case 3:null!==(e=t.sent)?E(e).then((function(e){l(e.prenom),m(e.nom),S(e.email),w(e.points)})):r("Login"),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),n("Login");case 10:case"end":return t.stop()}}),null,null,[[0,7]],Promise)}(),Object(f.jsxs)(j.a,{style:D.main_container,children:[Object(f.jsxs)(j.a,{style:D.text,children:[Object(f.jsxs)(d.a,{children:["Nom: ",h]}),Object(f.jsxs)(d.a,{children:["Pr\xe9nom: ",c]}),Object(f.jsxs)(d.a,{children:["Email: ",y]}),Object(f.jsxs)(d.a,{children:["Points: ",T]})]}),Object(f.jsx)(j.a,{style:D.buttons,children:Object(f.jsx)(g.a,{onPress:function(){v.a.removeItem("token"),r("Login")},title:"Se d\xe9connecter"})})]})},U=Object(T.a)();var B=function(){return Object(f.jsxs)(U.Navigator,{children:[Object(f.jsx)(U.Screen,{name:"Profil",component:L}),Object(f.jsx)(U.Screen,{name:"Login",component:k,options:function(){return{headerLeft:null,headerTitle:"Connexion"}}}),Object(f.jsx)(U.Screen,{name:"Register",component:_,options:function(){return{headerTitle:"Inscription"}}})]})},W=Object(a.a)();function A(){var e=Object(i.useState)(null),t=o()(e,2),n=t[0],r=t[1],a=Object(i.useState)(!0),u=o()(a,2),b=u[0],d=u[1];return Object(i.useEffect)((function(){fetch("https://mdljm.fr:8443/data/getData").then((function(e){return e.json()})).catch((function(e){return console.error(e)})).then((function(e){r(e),d(!1)}))}),[]),b?Object(f.jsx)(j.a,{style:M.loading_container,children:Object(f.jsx)(l.a,{size:"large"})}):Object(f.jsx)(s.a,{children:Object(f.jsxs)(W.Navigator,{children:[Object(f.jsx)(W.Screen,{name:n.name,component:m,options:{tabBarIcon:function(e){var t=e.color,n=e.size;return Object(f.jsx)(c.a,{name:"home-outline",size:n,color:t})}}}),Object(f.jsx)(W.Screen,{name:"Classement",component:z,options:{tabBarIcon:function(e){var t=e.color,n=e.size;return Object(f.jsx)(c.a,{name:"bar-chart-outline",size:n,color:t})}}}),Object(f.jsx)(W.Screen,{name:"Profil",component:B,options:{headerShown:!1,tabBarIcon:function(e){var t=e.color,n=e.size;return Object(f.jsx)(c.a,{name:"person-outline",size:n,color:t})}}})]})})}var M=u.a.create({loading_container:{position:"absolute",left:0,right:0,top:100,bottom:0,alignItems:"center",justifyContent:"center"}})},253:function(e,t,n){e.exports=n(370)}},[[253,1,2]]]);
//# sourceMappingURL=app.71cbaa65.chunk.js.map